{% if section.blocks.size > 0 %}
  <div class="content-section content-section--vm-testimonials">
    <div class="container">
      <div class="row">
        <div class="six columns">
          {% for block in section.blocks %}
          <h2 class="vm-testimonials__slide-title-link js-testimonial-slide-title-link" data-slide-index="{{ forloop.index }}">
            {{ block.settings.title }}
          </h2>
          {% endfor %}
        </div>
        <div class="ten columns">
          {% for block in section.blocks %}
            <div class="vm-testimonial-slide vm-testimonial-slide--index-{{ index }}" data-slide-index="{{ index }}">
              <h2 class="vm-testimonial-slide__title">
                {{ block.settings.title }}
              </h2>
              
              <p class="vm-testimonial-slide__testimonial paragraph--block-text">
                &ldquo;{{ block.settings.testimonial | strip_html }}&rdquo;
              </p>
              
              {% if block.settings.name != blank %}
                <p class="vm-testimonial-slide__name paragraph--block-text">
                  - {{ block.settings.name }}
                </p>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
{% endif %}

<script>
(function() {
  console.log('hello');

  function onTitleLinkClick(event) {
    const element = event.target;
    console.log(element);
  }

  document
    .querySelectorAll('.js-testimonial-slide-title-link')
    .forEach(function(element) {
      element.addEventListener('click', onTitleLinkClick);
    });
})()
</script>

{% schema %}

{
  "name": "Testimonials",
  "class": "testimonial-section",
  "settings": [],
  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Customer Testimonial"
        },
        {
          "type": "richtext",
          "id": "testimonial",
          "label": "Testimonial",
          "default": "<p>Include some of your favorite customer quotes and feedback here as social proof, to build credibility and trust for your services and products.</p>"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Customer name"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials",
      "category": "Text",
      "blocks": [
        {
          "type": "image"
        },
        {
          "type": "image"
        },
        {
          "type": "image"
        }
      ]
    }
  ]
}

{% endschema %}
